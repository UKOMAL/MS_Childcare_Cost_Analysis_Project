<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U.S. Childcare Cost Analysis Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #6dd5ed 0%, #2193b0 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .dashboard-container {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.15);
            padding: 20px;
            margin-bottom: 20px;
        }
        .control-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .visualization-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            height: 600px;
            position: relative;
        }
        #mainViz {
            width: 100%;
            height: 100%;
        }
        .key-insights {
            background: #f1f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .static-viz-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .viz-category {
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }
        .viz-category h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 4px solid #3498db;
        }
        .static-viz-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .static-viz-card:hover {
            transform: translateY(-5px);
        }
        .static-viz-card img {
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .static-viz-card h4 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .static-viz-card p {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="dashboard-container">
            <h2 class="text-center mb-4">U.S. Childcare Cost Analysis Dashboard</h2>
            
            <div class="row">
                <div class="col-md-3">
                    <div class="control-panel">
                        <h4>Dashboard Controls</h4>
                        <div class="mb-3">
                            <label for="dataType" class="form-label">Data Type</label>
                            <select class="form-select" id="dataType">
                                <option value="infant">Infant Care Costs</option>
                                <option value="toddler">Toddler Care Costs</option>
                                <option value="preschool">Preschool Care Costs</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="vizType" class="form-label">Visualization Type</label>
                            <select class="form-select" id="vizType">
                                <option value="choropleth">State Choropleth</option>
                                <option value="geoplot">Advanced Geoplot</option>
                                <option value="heatmap">Cost Heatmap</option>
                                <option value="violin">Cost Distribution (Violin)</option>
                                <option value="bubble">Multi-dimensional Bubble</option>
                                <option value="sunburst">Cost Hierarchy (Sunburst)</option>
                                <option value="parallel">Parallel Coordinates</option>
                            </select>
                        </div>
                        <button id="updateViz" class="btn btn-primary w-100 mb-2">Update Visualization</button>
                        <button id="exportData" class="btn btn-secondary w-100">Export Data (CSV)</button>
                    </div>
                    
                    <div class="key-insights">
                        <h4>Key Insights</h4>
                        <div class="mb-2">
                            <strong>Average Cost:</strong>
                            <span id="avgCost">$1,260.00</span>
                        </div>
                        <div class="mb-2">
                            <strong>Cost Range:</strong>
                            <span id="costRange">$900 - $1,600</span>
                        </div>
                        <div class="mb-2">
                            <strong>Highest:</strong>
                            <span id="highestState">CA ($1,600)</span>
                        </div>
                        <div class="mb-2">
                            <strong>Lowest:</strong>
                            <span id="lowestState">TX ($900)</span>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-9">
                    <div class="visualization-container">
                        <div id="mainViz" style="width: 100%; height: 100%;"></div>
                    </div>
                </div>
            </div>

            <!-- Static Visualizations Section -->
            <div class="static-viz-section mt-4">
                <h2 class="text-center mb-4">Detailed Analysis Visualizations</h2>
                
                <!-- Geographical Analysis -->
                <div class="viz-category mb-5">
                    <h3>Geographical Analysis</h3>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/childcare_costs_map.png" alt="Childcare Costs Map" class="img-fluid">
                                <h4>State-wise Childcare Costs Distribution</h4>
                                <p>Geographical distribution of childcare costs across the United States</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/urban_rural_comparison.png" alt="Urban vs Rural Comparison" class="img-fluid">
                                <h4>Urban vs Rural Cost Comparison</h4>
                                <p>Analysis of childcare costs in urban versus rural areas</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Trend Analysis -->
                <div class="viz-category mb-5">
                    <h3>Trend Analysis</h3>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/time_series.png" alt="Time Series Analysis" class="img-fluid">
                                <h4>Cost Trends Over Time</h4>
                                <p>Historical trends in childcare costs (2010-2023)</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/cost_trends.png" alt="Cost Trends" class="img-fluid">
                                <h4>Cost Growth Patterns</h4>
                                <p>Analysis of cost growth patterns across different regions</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistical Analysis -->
                <div class="viz-category mb-5">
                    <h3>Statistical Analysis</h3>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/correlation.png" alt="Correlation Analysis" class="img-fluid">
                                <h4>Cost Correlation Analysis</h4>
                                <p>Correlation between different factors affecting childcare costs</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/cost_distribution.png" alt="Cost Distribution" class="img-fluid">
                                <h4>Cost Distribution Analysis</h4>
                                <p>Statistical distribution of childcare costs</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Infographics -->
                <div class="viz-category mb-5">
                    <h3>Key Insights Infographics</h3>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/infographic_1.png" alt="Infographic 1" class="img-fluid">
                                <h4>Cost Impact Overview</h4>
                                <p>Key statistics and impacts of childcare costs</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="static-viz-card">
                                <img src="images/infographic_2.png" alt="Infographic 2" class="img-fluid">
                                <h4>Regional Comparisons</h4>
                                <p>Regional variations and comparative analysis</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dashboard data
        const globalData = {
            costs: {
                infant: [1600, 1500, 1200, 1300, 1400, 1250, 1100, 1150, 1200, 1100],
                toddler: [1400, 1300, 1000, 1100, 1200, 1050, 900, 950, 1000, 900],
                preschool: [1200, 1100, 800, 900, 1000, 850, 700, 750, 800, 700]
            },
            states: ['CA', 'NY', 'TX', 'FL', 'IL', 'PA', 'OH', 'GA', 'NC', 'MI'],
            stateNames: {
                'CA': 'California', 'NY': 'New York', 'TX': 'Texas', 'FL': 'Florida',
                'IL': 'Illinois', 'PA': 'Pennsylvania', 'OH': 'Ohio', 'GA': 'Georgia',
                'NC': 'North Carolina', 'MI': 'Michigan'
            }
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateVisualization();
        });

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('dataType').addEventListener('change', updateVisualization);
            document.getElementById('vizType').addEventListener('change', updateVisualization);
            document.getElementById('updateViz').addEventListener('click', updateVisualization);
            document.getElementById('exportData').addEventListener('click', exportToCSV);
        }

        // Update visualization
        function updateVisualization() {
            const dataType = document.getElementById('dataType').value;
            const vizType = document.getElementById('vizType').value;
            const data = globalData.costs[dataType];
            const states = globalData.states;

            switch(vizType) {
                case 'choropleth':
                    createChoropleth(data, states);
                    break;
                case 'geoplot':
                    createAdvancedGeoplot(data, states);
                    break;
                case 'heatmap':
                    createHeatmap(data, states);
                    break;
                case 'violin':
                    createViolinPlot(data, states);
                    break;
                case 'bubble':
                    createBubblePlot(data, states);
                    break;
                case 'sunburst':
                    createSunburst(data, states);
                    break;
                case 'parallel':
                    createParallelCoordinates(data, states);
                    break;
            }

            updateKeyInsights(data, states);
        }

        // Create choropleth visualization
        function createChoropleth(data, states) {
            // Create a map of all US states with default values
            const allStates = {
                'AL': 0, 'AK': 0, 'AZ': 0, 'AR': 0, 'CA': 0, 'CO': 0, 'CT': 0, 'DE': 0,
                'FL': 0, 'GA': 0, 'HI': 0, 'ID': 0, 'IL': 0, 'IN': 0, 'IA': 0, 'KS': 0,
                'KY': 0, 'LA': 0, 'ME': 0, 'MD': 0, 'MA': 0, 'MI': 0, 'MN': 0, 'MS': 0,
                'MO': 0, 'MT': 0, 'NE': 0, 'NV': 0, 'NH': 0, 'NJ': 0, 'NM': 0, 'NY': 0,
                'NC': 0, 'ND': 0, 'OH': 0, 'OK': 0, 'OR': 0, 'PA': 0, 'RI': 0, 'SC': 0,
                'SD': 0, 'TN': 0, 'TX': 0, 'UT': 0, 'VT': 0, 'VA': 0, 'WA': 0, 'WV': 0,
                'WI': 0, 'WY': 0
            };

            states.forEach((state, index) => {
                allStates[state] = data[index];
            });

            const mapData = [{
                type: "choropleth",
                locationmode: "USA-states",
                locations: Object.keys(allStates),
                z: Object.values(allStates),
                text: Object.entries(allStates).map(([state, value]) => 
                    `${state}: ${value > 0 ? '$' + value : 'No data'}`
                ),
                hoverinfo: 'text',
                colorscale: [
                    [0, '#f8f9fa'],
                    [0.2, '#f8d7da'],
                    [0.5, '#e74c3c'],
                    [1, '#7b241c']
                ],
                showscale: true,
                colorbar: {
                    title: "Monthly Cost ($)",
                    thickness: 20,
                    len: 0.5,
                    y: 0.5
                }
            }];

            const layout = {
                title: {
                    text: "Childcare Costs Across United States",
                    font: { size: 24, color: '#2c3e50' }
                },
                geo: {
                    scope: "usa",
                    showlakes: true,
                    lakecolor: "rgb(255,255,255)",
                    projection: {
                        type: "albers usa"
                    },
                    showland: true,
                    landcolor: "#f8f9fa",
                    countrycolor: "#c7c7c7"
                },
                margin: { t: 50, b: 0, l: 0, r: 0 },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)'
            };

            Plotly.newPlot('mainViz', mapData, layout);
        }

        // Create advanced geoplot with multiple layers
        function createAdvancedGeoplot(data, states) {
            const bubbleData = [{
                type: 'scattergeo',
                lon: [-122.4194, -74.0060, -95.7129, -81.3792, -87.6298, -75.1652, -82.9988, -84.3880, -78.6382, -83.0458],
                lat: [37.7749, 40.7128, 30.2672, 28.5383, 41.8781, 39.9526, 39.9612, 33.7490, 35.7796, 42.3314],
                text: states.map((state, i) => `${state}: $${data[i]}`),
                mode: 'markers',
                marker: {
                    size: data.map(d => d/50),
                    color: data,
                    colorscale: 'Viridis',
                    showscale: true,
                    colorbar: {
                        title: 'Cost ($)'
                    }
                },
                name: 'Cost Centers'
            }, {
                type: 'scattergeo',
                lon: [-122.4194, -74.0060, -95.7129],
                lat: [37.7749, 40.7128, 30.2672],
                mode: 'lines',
                line: {
                    width: 2,
                    color: '#e74c3c'
                },
                name: 'Cost Flow'
            }];

            const layout = {
                title: 'Multi-layer Geographic Analysis',
                showlegend: true,
                geo: {
                    scope: 'usa',
                    projection: {
                        type: 'albers usa'
                    },
                    showland: true,
                    landcolor: '#f8f9fa',
                    showsubunits: true,
                    showcountries: true,
                    subunitcolor: '#d3d3d3',
                    countrycolor: '#c7c7c7'
                }
            };

            Plotly.newPlot('mainViz', bubbleData, layout);
        }

        // Create heatmap visualization
        function createHeatmap(data, states) {
            const correlationMatrix = [];
            const labels = ['Cost', 'Population', 'Income', 'Demand'];
            
            // Generate sample correlation data
            for(let i = 0; i < 4; i++) {
                correlationMatrix[i] = [];
                for(let j = 0; j < 4; j++) {
                    if(i === j) correlationMatrix[i][j] = 1;
                    else correlationMatrix[i][j] = Math.random() * 2 - 1;
                }
            }

            const heatmapData = [{
                z: correlationMatrix,
                x: labels,
                y: labels,
                type: 'heatmap',
                colorscale: 'RdBu',
                zmin: -1,
                zmax: 1,
                hoverongaps: false
            }];

            const layout = {
                title: 'Cost Factor Correlation Heatmap',
                annotations: [],
                xaxis: {
                    ticks: '',
                    side: 'top'
                },
                yaxis: {
                    ticks: '',
                    ticksuffix: ' '
                }
            };

            // Add correlation values as annotations
            for(let i = 0; i < 4; i++) {
                for(let j = 0; j < 4; j++) {
                    layout.annotations.push({
                        xref: 'x',
                        yref: 'y',
                        x: labels[j],
                        y: labels[i],
                        text: correlationMatrix[i][j].toFixed(2),
                        font: {
                            color: Math.abs(correlationMatrix[i][j]) > 0.5 ? 'white' : 'black'
                        },
                        showarrow: false
                    });
                }
            }

            Plotly.newPlot('mainViz', heatmapData, layout);
        }

        // Create violin plot
        function createViolinPlot(data, states) {
            // Generate sample distribution data
            const violinData = [{
                type: 'violin',
                x: new Array(50).fill('Infant'),
                y: data.map(d => d + Math.random() * 200 - 100),
                points: 'all',
                box: {
                    visible: true
                },
                line: {
                    color: '#3498db'
                },
                meanline: {
                    visible: true
                }
            }, {
                type: 'violin',
                x: new Array(50).fill('Toddler'),
                y: data.map(d => d * 0.9 + Math.random() * 200 - 100),
                points: 'all',
                box: {
                    visible: true
                },
                line: {
                    color: '#2ecc71'
                },
                meanline: {
                    visible: true
                }
            }];

            const layout = {
                title: 'Cost Distribution by Age Group',
                yaxis: {
                    title: 'Monthly Cost ($)',
                    zeroline: false
                },
                violinmode: 'group'
            };

            Plotly.newPlot('mainViz', violinData, layout);
        }

        // Create bubble plot
        function createBubblePlot(data, states) {
            const bubbleData = [{
                x: data,
                y: data.map(d => d * 0.8 + Math.random() * 200),
                text: states,
                mode: 'markers',
                marker: {
                    size: data.map(d => d/30),
                    color: data,
                    colorscale: 'Viridis',
                    showscale: true,
                    colorbar: {
                        title: 'Base Cost ($)'
                    }
                }
            }];

            const layout = {
                title: 'Multi-dimensional Cost Analysis',
                xaxis: {
                    title: 'Base Cost ($)'
                },
                yaxis: {
                    title: 'Adjusted Cost ($)'
                },
                showlegend: false
            };

            Plotly.newPlot('mainViz', bubbleData, layout);
        }

        // Create sunburst chart
        function createSunburst(data, states) {
            const sunburstData = [{
                type: "sunburst",
                ids: [
                    "Total",
                    "West", "Midwest", "Northeast", "South",
                    ...states
                ],
                labels: [
                    "All Regions",
                    "West", "Midwest", "Northeast", "South",
                    ...states.map(state => globalData.stateNames[state])
                ],
                parents: [
                    "",
                    "Total", "Total", "Total", "Total",
                    ...states.map(state => {
                        if(['CA', 'WA', 'OR'].includes(state)) return "West";
                        if(['IL', 'MI', 'OH'].includes(state)) return "Midwest";
                        if(['NY', 'PA'].includes(state)) return "Northeast";
                        return "South";
                    })
                ],
                values: [
                    data.reduce((a, b) => a + b, 0),
                    ...Array(4).fill(0),
                    ...data
                ],
                branchvalues: 'total'
            }];

            const layout = {
                title: 'Regional Cost Hierarchy'
            };

            Plotly.newPlot('mainViz', sunburstData, layout);
        }

        // Create parallel coordinates plot
        function createParallelCoordinates(data, states) {
            const dimensions = [{
                label: 'Base Cost',
                values: data
            }, {
                label: 'Adjusted',
                values: data.map(d => d * 1.1)
            }, {
                label: 'Subsidized',
                values: data.map(d => d * 0.7)
            }, {
                label: 'Projected',
                values: data.map(d => d * 1.2)
            }];

            const parallelData = [{
                type: 'parcoords',
                line: {
                    color: data,
                    colorscale: 'Viridis'
                },
                dimensions: dimensions
            }];

            const layout = {
                title: 'Multi-variable Cost Analysis'
            };

            Plotly.newPlot('mainViz', parallelData, layout);
        }

        // Update key insights
        function updateKeyInsights(data, states) {
            const avg = data.reduce((a, b) => a + b) / data.length;
            const max = Math.max(...data);
            const min = Math.min(...data);
            const maxState = states[data.indexOf(max)];
            const minState = states[data.indexOf(min)];

            document.getElementById('avgCost').textContent = `$${avg.toFixed(2)}`;
            document.getElementById('costRange').textContent = `$${min} - $${max}`;
            document.getElementById('highestState').textContent = `${maxState} ($${max})`;
            document.getElementById('lowestState').textContent = `${minState} ($${min})`;
        }

        // Export data to CSV
        function exportToCSV() {
            const dataType = document.getElementById('dataType').value;
            const data = globalData.costs[dataType];
            const states = globalData.states;
            
            let csv = 'State,Cost\n';
            states.forEach((state, i) => {
                csv += `${state},${data[i]}\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `childcare_costs_${dataType}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html> 